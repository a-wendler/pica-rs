<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>pica-rs Dokumentation</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="beginner-tutorial.html"><strong aria-hidden="true">1.</strong> Beginner Tutorial</a></li><li class="chapter-item expanded "><a href="rmarkdown/rmarkdown.html"><strong aria-hidden="true">2.</strong> Verwendung in RMarkdown</a></li><li class="chapter-item expanded "><a href="referenz/index.html"><strong aria-hidden="true">3.</strong> Referenz</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="referenz/matcher.html"><strong aria-hidden="true">3.1.</strong> Matcher</a></li><li class="chapter-item expanded "><a href="referenz/occurrence.html"><strong aria-hidden="true">3.2.</strong> Occurrence</a></li><li class="chapter-item expanded "><a href="referenz/subfield.html"><strong aria-hidden="true">3.3.</strong> Subfield</a></li><li class="chapter-item expanded "><a href="referenz/tag.html"><strong aria-hidden="true">3.4.</strong> Tag</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">pica-rs Dokumentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pica-rs-anfÃ¤nger-tutorial"><a class="header" href="#pica-rs-anfÃ¤nger-tutorial">pica-rs AnfÃ¤nger-Tutorial</a></h1>
<h2 id="was-ist-pica-rs"><a class="header" href="#was-ist-pica-rs">Was ist pica-rs?</a></h2>
<p>pica-rs ist ein Set von Kommandozeilen-Tools zur Arbeit mit PICA+-Bibliothekskatalog-Daten. Wenn Sie nicht wissen, was PICA-Daten sind, brauchen Sie diese Tools nicht. ğŸ˜‰ GroÃŸe DatenabzÃ¼ge bis hin zu GesamtabzÃ¼gen kÃ¶nnen schnell gefiltert werden und es kÃ¶nnen die Daten einzelner Felder und Unterfelder in CSV-Dateien exportiert werden, HÃ¤ufigkeitsverteilungen des Inhalts einzelner Unterfeldern erfasst werden und vieles mehr.</p>
<h2 id="wie-funktioniert-pica-rs"><a class="header" href="#wie-funktioniert-pica-rs">Wie funktioniert pica-rs?</a></h2>
<p>Das Tool kann mit extrem groÃŸen Dateien umgehen, weil es diese sequentiell ausliest und prozessiert. Die Dateien werden nicht geÃ¶ffnet und in den Arbeitsspeicher geladen, sondern â€ºhÃ¤ppchenweiseâ€¹ ausgewertet. Es ist deswegen kein Rechner mit besonders viel Arbeitsspeicher notwendig. Es empfiehlt sich aber, die Ausgangsdaten auf mÃ¶glichst schnellen lokalen Laufwerken abzulegen. Netzlaufwerke sind weniger geeignet und verlangsamen das Tool unnÃ¶tig.</p>
<p>pica-rs lÃ¤uft unter Windows, Linux und Mac OS.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>Es ist mÃ¶glich, die Quelldateien herunterzuladen und direkt auf dem eigenen Rechner von Rust zu einem lauffÃ¤higen Programm kompilieren zu lassen.</p>
<p>FÃ¼r die gÃ¤ngigen Windows-, Apple- oder Linux-Systeme, stehen aber fertige Programmpakete unter <a href="https://github.com/deutsche-nationalbibliothek/pica-rs/releases">https://github.com/deutsche-nationalbibliothek/pica-rs/releases</a> zur VerfÃ¼gung.</p>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<p>Legen Sie die Datei <code>pica.exe</code> im Verzeichnis <code>C:\Users\&lt;IHR USERNAME&gt;\AppData\Local\Microsoft\WindowsApps</code> ab.</p>
<p>Starten Sie die <code>Windows Power Shell</code>, indem Sie auf den Windows Startbutton klicken und dann <code>Power</code> tippen. Ihnen wird das Programm jetzt angezeigt. Tippen Sie <code>pica</code> ein. Sie erhalten jetzt zwar den Fehler <code>error: 'pica.exe' requires a subcommand, but one was not provided</code>, wissen aber, dass das Programm korrekt installiert ist.</p>
<h3 id="linuxmac-os"><a class="header" href="#linuxmac-os">Linux/Mac OS</a></h3>
<p>Entpacken Sie das Paket und legen es in einen beliebigen Ordner.</p>
<p>In der Konfigurationsdatei Ihres Terminals mÃ¼ssen Sie dann noch den Pfad angeben, in dem Sie das Programm abgelegt haben.</p>
<p>Beispiel: ZSH unter Linux oder MacOS</p>
<p>Die versteckte Datei <code>.zshrc</code> liegt Ã¼blicherweise im Homeverzeichnis des aktuellen Benutzers. Dort fÃ¼gen Sie an beliebiger Stelle folgende Zeile hinzu:</p>
<pre><code class="language-bash">export PATH=&quot;/&lt;PFADZUMPROGRAMM&gt;:$PATH&quot;
</code></pre>
<p>wobei <code>&lt;PFADZUMPROGRAMM&gt;</code> natÃ¼rlich durch Ihren tatsÃ¤chlichen Pfad ersetzt werden muss.</p>
<p>Nach einem Neustart des Terminals sollte jetzt der neue Befehl <code>pica</code> zur VerfÃ¼gung stehen. Mit <code>pica -V</code> kÃ¶nnen Sie testen, welche Version sie haben.</p>
<h2 id="kommandozeile"><a class="header" href="#kommandozeile">Kommandozeile</a></h2>
<p>pica-rs ist auch deswegen sehr schnell, weil es kein grafisches Interface hat. Man sollte deshalb einige Basics der Kommandozeilen (auch Terminal oder Shell genannt) des jeweiligen Betriebssystems kennen. Alle Befehle werden hier in der Fassung fÃ¼r gÃ¤ngige Linux-und Mac OS-Terminals gezeigt, abweichende Befehle der Windows Power Shell werden meistens in Klammern erwÃ¤hnt.</p>
<p>Zum Testen steht unter <a href="https://github.com/a-wendler/pica-rs/blob/tutorial/docs/book/src/de/testdaten.dat">https://github.com/a-wendler/pica-rs/blob/tutorial/docs/book/src/de/testdaten.dat</a> ein Testdatenpaket mit 1.000 zufÃ¤llig ausgewÃ¤hlten DatensÃ¤tzen aus dem Bestand der Deutschen Nationalbibliothek bereit. Der Test-Datensatz enthÃ¤lt sowohl Titeldaten als auch GND-NormdatensÃ¤tze.</p>
<h2 id="pipes"><a class="header" href="#pipes">Pipes</a></h2>
<p>Um das Tool optimal nutzen zu kÃ¶nnen, sollten Sie verstehen, was <strong>Pipes</strong> sind. Im Terminal wird die Ausgabe ausgefÃ¼hrter Programme oder Befehle Ã¼blicherweise in die sogenannte <strong>Standardausgabe</strong> (<code>stdout</code>) geschrieben. Normalerweise ist das die Bildschirmausgabe des Terminals selbst. Wenn sie z. B. den Inhalt des aktuellen Ordners mit <code>ls</code> (Windows: <code>dir</code>) auslesen, wird eine Liste aller Dateien und Ordner direkt im Terminal ausgegeben.</p>
<p>Sie kÃ¶nnten diese Ausgabe aber auch umleiten: z.B. in eine Datei oder auf einen angeschlossenen Drucker etc.</p>
<p>Piping nennt man ein Verfahren, bei dem die Ausgabe eines Befehls direkt als Eingabe fÃ¼r einen weiteren Befehl verwendet wird. Wie Rohre (pipes) werden die Befehle aneinandergesteckt und die Daten flieÃŸen von einem Programm zum nÃ¤chsten.</p>
<p>Dazu werden die Befehle mit einem senkrechten Strich verbunden: <code>|</code> Unter Linux und Windows ist dieser Strich normalerweise Ã¼ber die Tastenkombination <code>AltGr + &lt;</code> zu erreichen, unter MacOS Ã¼ber <code>Alt + 7</code>.</p>
<p>Man kÃ¶nnte also z. B. die Ausgabe von <code>ls</code> bzw. <code>dir</code> an einen Befehl weiterleiten, der die Anzahl der ausgegeben Zeilen zÃ¤hlt. Dieser Befehl heiÃŸt <code>wc -l</code> (von word count -lines). Das korrekte Piping geht so:</p>
<pre><code class="language-bash">ls | wc -l
</code></pre>
<p>Die Ausgabe von Word Count lÃ¤sst sich wieder weiterleiten, z.B. in eine Datei:</p>
<pre><code class="language-bash">ls | wc -l &gt; ordnerinhalt.txt
</code></pre>
<p>Der <code>&gt;</code>-Operator leitet den Inhalt in eine Datei weiter und ist eine Art Sonderfall des Pipings, der nur fÃ¼r das Schreiben in Dateien gilt.</p>
<p>Man kÃ¶nnte die Ausgabe mit einer weiteren Pipe auch an noch einen weiteren Befehl Ã¼bergeben.</p>
<p>Mit Pipes lassen sich die einzelnen pica-rs-Tools (select, filter, frequency usw.) miteinander verknÃ¼pfen. Die Ausgabe des einen Tools kann entweder zum nÃ¤chsten Tool, in eine Datei oder einfach auf den Bildschirm geleitet werden. Alle Tools schreiben immer in die Standardausgabe. Will man die Ausgabe anders erhalten, muss man das dem Befehl mitteilen.</p>
<h2 id="los-gehts"><a class="header" href="#los-gehts">Los gehtâ€™s</a></h2>
<p>Navigieren Sie im Terminal zu dem Ordner, in dem das Testdatenpaket liegt. Wir gehen davon aus, dass Sie im Hauptverzeichnis Ihres aktuellen Benutzers (unter Linux und Mac OS Ã¼ber das KÃ¼rzel <code>~</code> zu erreichen) im Verzeichnis <code>pica-test</code> arbeiten. Das Testdatenpaket heiÃŸt <code>testdaten.dat</code>.</p>
<pre><code class="language-bash">cd ~/pica-test
</code></pre>
<p>ÃœberprÃ¼fen Sie, ob das Testdatenpaket vorhanden ist.</p>
<pre><code class="language-bash">ls (unter Windows: dir)
</code></pre>
<p>Sie sehen etwas wie:</p>
<pre><code class="language-bash">total 1872
drwxr-xr-x   3 testuser  staff    96B  9 Nov 14:24 .
drwxr-xr-x+ 76 testuser  staff   2,4K  9 Nov 14:25 ..
-rw-r--r--@  1 testuser  staff   935K 14 Sep 18:30 testdaten.dat
</code></pre>
<h2 id="print"><a class="header" href="#print">print</a></h2>
<p>Wir beginnen mit mit <strong>pica print</strong>. Dieses Tool formatiert die unleserlichen PICA+-Daten zu gut lesbaren DatensÃ¤tzen. Mit dem Befehl lassen sich die teilweise unÃ¼bersichtlichen Daten gut Ã¼berblicken. Wir wollen nur einen Datensatz aus den Testdaten auf dem Bildschirm ausgeben.</p>
<pre><code class="language-bash">pica print -l 1 testdaten.dat
</code></pre>
<p>Die Option <code>-l</code> steht fÃ¼r Limit und begrenzt die Ausgabe auf einen Datensatz. Die folgende Ziffer gibt die Anzahl der auszugebenden DatensÃ¤tze an.</p>
<p>Wir kÃ¶nnen die Ausgabe auch in eine Datei schreiben:</p>
<pre><code class="language-bash">pica print -l 1 testdaten.dat -o testdatensatz.txt
</code></pre>
<p>Wenn Sie nur einen Dateinamen angeben, wird die Datei im aktuellen Verzeichnis abgelegt. Wollen sie in ein anderes Verzeichnis schreiben, mÃ¼ssen sie den kompletten Pfad dorthin angeben.</p>
<p>Im Folgenden gehen wir davon aus, dass Sie grundlegend mit der Struktur von Pica-Daten vertraut sind, also z. B. Feldern und Unterfeldern, Satzarten, Codes etc.</p>
<h2 id="filter"><a class="header" href="#filter">filter</a></h2>
<p>Mit <strong>filter</strong> kÃ¶nnen Teilmengen aus einem Daten-Dump nach einem bestimmten Selektionskriterium gebildet werden. <strong>filter</strong> gibt grundsÃ¤tzlich den ganzen Datensatz aus, wenn die angegebenen Filterkriterien erfÃ¼llt sind.</p>
<p>Wir wissen, dass in unseren Testdaten jeweils 100 DatensÃ¤tze der unterschiedlichen Satzarten enthalten sind. Wir wollen alle Oa-SÃ¤tze herausfiltern und den ersten davon mit <code>print</code> ausgeben.</p>
<pre><code class="language-bash">pica filter -s &quot;002@.0 == 'Oa'&quot; testdaten.dat | pica print -l 1
</code></pre>
<p>Das Ergebnis kÃ¶nnte man auch wieder in eine Datei schreiben:</p>
<pre><code class="language-bash">pica filter -s &quot;002@.0 == 'Oa'&quot; testdaten.dat -o oa-test.dat
</code></pre>
<p>Achtung: Dateien werden ohne RÃ¼ckfrage Ã¼berschrieben und werden nicht im Papierkorb gesichert. GewÃ¶hnen Sie sich am besten an, in ein eigenes Ausgabeverzeichnis zu schreiben oder fÃ¼gen Sie das aktuelle Datum an den Ausgabedateinamen an, damit sie nicht ausversehen eine Ã¤ltere Datei Ã¼berschreiben.</p>
<h3 id="filter-ausdrÃ¼cke"><a class="header" href="#filter-ausdrÃ¼cke">Filter-AusdrÃ¼cke</a></h3>
<p>Der Filterausdruck in den doppelten AnfÃ¼hrungszeichen ist das mÃ¤chtigste Werkzeug von pica-rs. Mehrere AusdrÃ¼cke kÃ¶nnen zu komplexen Suchfiltern kombiniert werden.</p>
<p>Jeder Filterausdruck besteht immer aus einem Feld wie <code>002@</code>, einem Unterfeldfilter wie <code>.0</code>, einem Operator, der angibt, wie der Inhalt des Feldes gefiltert werden soll, wie z. B. <code>==</code> und einem Wert, mit dem das Feld verglichen werden soll.</p>
<h3 id="felder"><a class="header" href="#felder">Felder</a></h3>
<p>Felder kÃ¶nnen in der einfachsten Form direkt benannt werden: <code>002@</code></p>
<p>Felder kÃ¶nnen auch nummerierte Okkurrenzen haben wie <code>/01</code>. Okkurrenzen lassen sich nach ihrem Wert filtern oder alle Okkurrenzen kÃ¶nnen mit <code>/*</code> durchsucht werden. Bereiche von Okkurrenzen kÃ¶nnen ebenfalls eingegrenzt werden: <code>047A/01-03</code></p>
<h3 id="unterfelder"><a class="header" href="#unterfelder">Unterfelder</a></h3>
<p>Unterfelder werden mit einem Punkt und ohne Dollarzeichen angehÃ¤ngt: <code>002@.9</code> meint Unterfeld <code>$9</code> von Feld <code>002@</code>.</p>
<p>Um z. B. Unterfeld <code>9</code> aller Okkurrenzen von Feld <code>041A</code> zu filtern, mÃ¼sste der Feldausdruck lauten: <code>041A/*.9</code>.</p>
<h3 id="operatoren"><a class="header" href="#operatoren">Operatoren</a></h3>
<p>Werte kÃ¶nnen Ã¼ber folgende Vergleichsoperatoren gesucht werden.</p>
<ul>
<li>gleich <code>==</code> </li>
<li>ungleich <code>!=</code></li>
<li>beginnt mit Prefix <code>=^</code></li>
<li>endet mit Suffix <code>=$</code></li>
<li>entspricht regulÃ¤rem Ausdruck <code>=~</code></li>
<li>enthalten in <code>in</code></li>
<li>nicht enthalten in <code>not in</code></li>
<li>Feld existiert <code>?</code></li>
</ul>
<p>Die Operatoren kÃ¶nnen in runden Klammern gruppiert und mit den boolschen Operatoren UND <code>&amp;&amp;</code> sowie ODER <code>||</code> verbunden werden.</p>
<h4 id=""><a class="header" href="#">==</a></h4>
<p>Der ==-Operator prÃ¼ft, ob es ein Unterfeld gibt, dass einem Wert entspricht. <code>pica filter &quot;012A.a == 'abc'&quot;</code> liest sich wie folgt: Es existiert ein Feld <code>012A</code> mit <em>einem</em> Unterfeld <code>a</code> das gleich <code>abc</code> ist. Es kÃ¶nnten noch weitere Unterfelder <code>a</code> existieren, die nicht <code>abc</code> sind.</p>
<h4 id="-1"><a class="header" href="#-1">!=</a></h4>
<p>Das GegenstÃ¼ck zu <code>==</code>. PrÃ¼ft, ob ein Unterfeld nicht einem Wert entspricht.</p>
<h4 id="-2"><a class="header" href="#-2">=^</a></h4>
<p>PrÃ¼ft, ob ein Unterfeld mit einem bestimmten Prefix beginnt.</p>
<h4 id="-3"><a class="header" href="#-3">=$</a></h4>
<p>PrÃ¼ft, ob ein Unterfeld mit einem bestimmten Suffix endet.</p>
<h4 id="-4"><a class="header" href="#-4">=~</a></h4>
<p>PrÃ¼ft ob ein Feld einem regulÃ¤ren Ausdruck entspricht. Die Auswertung dieses Operators benÃ¶tigt die meiste RechenkapazitÃ¤t. Er sollte deshalb nur dann verwendet werden, wenn er wirklich absolut notwendig ist. Es ist z. B. schneller, nach einer Kombination von <code>=^</code> und <code>=$</code> zu suchen als nach einem regulÃ¤ren Ausdruck.</p>
<p>Tipp: ein empfehlenswertes Tool, um regulÃ¤re AusdrÃ¼cke zu schreiben und zu testen, ist (regex101.com)[https://regex101.com].</p>
<h4 id="in-und-not-in"><a class="header" href="#in-und-not-in">in und not in</a></h4>
<p>PrÃ¼ft, ob ein Unterfeld in einer Liste von Werten enthalten ist. Die Werte stehen in eckigen Klammern und sind durch Kommas getrennt. <code>not in</code> ist die Umkehrung dazu und prÃ¼ft, ob Unterfeld nicht in der Werteliste enthalten ist.</p>
<p>Beispiel:</p>
<pre><code class="language-bash">pica filter -s &quot;0100.a in ['ger', 'eng']&quot; testdaten.dat
</code></pre>
<h4 id="-5"><a class="header" href="#-5">?</a></h4>
<p>PrÃ¼ft. ob ein Feld oder ein Unterfeld Ã¼berhaupt existiert.</p>
<pre><code class="language-bash">pica filter -s &quot;012A/00?&quot; testdaten.dat
pica filter -s &quot;002@.0?&quot; testdaten.dat
pica filter -s &quot;002@{0?}&quot; testdaten.dat
</code></pre>
<h3 id="mehrere-felder-adressieren"><a class="header" href="#mehrere-felder-adressieren">mehrere Felder adressieren</a></h3>
<p>Es kommt Ã¶fters vor, dass sich ein Wert vom gleichen Typ in unterschiedlichen Feldern befindet. Z. B. befindet sich im Feld <code>028A.9</code> die &quot;Person, Familie - 1. geistiger SchÃ¶pfer&quot; und im Feld <code>029A.9</code> &quot;Person, Familie - weitere geistige SchÃ¶pfer&quot;. Um DatensÃ¤tze zu filtern, die entweder einen 1. geistigen SchÃ¶pfer oder einen weiteren geistigen SchÃ¶pfer haben, kÃ¶nnte man schreiben:</p>
<pre><code class="language-bash">pica filter &quot;028A.9? || 029A.9?&quot; testdaten.dat
</code></pre>
<p>Der Ausdruck lÃ¤sst sich vereinfachen zu:</p>
<pre><code class="language-bash">pica filter &quot;02[89]A.9?&quot; testdaten.dat
</code></pre>
<p>An jeder Position in einem Feld kann eine Liste der gÃ¼ltigen Werte angegeben werden. Es wird dann jede mÃ¶gliche Kombination ausprobiert, um einen Match zu finden. Bsp. <code>0[12][34]A</code> fÃ¼hrt zu der Liste <code>013A</code>, <code>014A</code>, <code>023A</code> und <code>024A</code>.</p>
<h3 id="mehrere-unterfelder-adressieren"><a class="header" href="#mehrere-unterfelder-adressieren">mehrere Unterfelder adressieren</a></h3>
<p>So Ã¤hnlich kÃ¶nnen auch mehrere Unterfelder adressiert werden. Beispiel: Im Feld <code>045E</code> befindet sich die Sachgruppe der Deutschen Nationabibliografie. Im Unterfeld <code>$e</code> die Hauptsachgruppe (HSG) und im Feld <code>$f</code> die Nebensachgruppen (NSG). Ist man an allen DatensÃ¤tzen interessiert, die zur HSG 100 oder zur NSG 100 gehÃ¶ren, kÃ¶nnte man folgenden Filter schreiben:</p>
<pre><code class="language-bash">pica filter &quot;045E.e == '100' || 045E.f == '100'&quot; testdaten.dat
</code></pre>
<p>Der Ausdruck lÃ¤sst sich verkÃ¼rzen zu:</p>
<pre><code class="language-bash">pica filter &quot;045E.[ef] == '100'&quot; testdaten.dat
</code></pre>
<p>Beide Verfahren sind kombinierbar: <code>0[12]3[AB].[xyz]</code> ist ein gÃ¼ltiger Ausdruck.</p>
<h2 id="select"><a class="header" href="#select">Select</a></h2>
<p>Mit <strong>select</strong> kÃ¶nnen die Werte einzelner Unterfelder in eine CSV-Datei exportiert werden. Dabei kÃ¶nnen mehrere Unterfelder kombiniert werden. Man kann aus riesigen DatenbestÃ¤nden exakt die Daten extrahieren, die man fÃ¼r weitere Datenanalyse benÃ¶tigt.</p>
<p>Der Selektionsausdruck enthÃ¤lt eine durch Kommas getrennte Liste von Unterfeldern, die ausgelesen werden sollen, z. B.:</p>
<pre><code class="language-bash">pica select &quot;002@.0, 003@.0&quot; testdaten.dat -o test-select.csv
</code></pre>
<p>Das Ergebnis ist eine CSV-Datei mit zwei Spalten, in diesem Beispiel einer Spalte fÃ¼r die Satzart und einer Spalte fÃ¼r die IDN.</p>
<p>Wenn Felder mehrere Unterfelder haben, kÃ¶nnen diese in einer Liste in geschweiften Klammer an die Feldbezeichnung angehÃ¤ngt werden.</p>
<pre><code class="language-bash">pica select &quot;002@.0, 003@.0, 021A{a,h}&quot; testdaten.dat -o test-select.csv
</code></pre>
<p>In die SelektionsausdrÃ¼cke kÃ¶nnen auch FilterausdrÃ¼cke eingebaut werden. Dazu muss die erste Position der Liste in den geschweiften Klammern mit einem Filterausdruck belegt werden.</p>
<pre><code class="language-bash">pica select &quot;003@.0, 028A{4 == 'aut',9,d,a}&quot; testdaten.dat -o test-select.csv
</code></pre>
<p>In diesem Beispiel werden die Angaben zu den beteiligten Personen aus Feld 028A nur Ã¼bernommen, wenn Unterfeld 4 den Wert <code>aut</code> enthÃ¤lt, die Person also Autor*in ist und nicht etwa Herausgeber*in.</p>
<p>FÃ¼r diese FilterausdrÃ¼cke gelten dieselben Regeln wie fÃ¼r FilterausdrÃ¼cke im filter-Tool, die oben beschrieben wurden.</p>
<p>Wenn Felder wiederholbar sind (z. B. bei Schlagworten), wird pro Wiederholung eine neue Zeile in die CSV ausgegeben. Die ausgegebene CSV-Datei kann also mehr Zeilen enthalten, als DatensÃ¤tze in den Ausgangsdaten waren. Es empfiehlt sich deshalb einen eindeutigen Identifikator mitzuselektieren, damit die wiederholten Felddaten von neuen DatensÃ¤tzen unterschieden werden kÃ¶nnen.</p>
<p>Es kÃ¶nnen auch Spaltennamen fÃ¼r die CSV-Ausgabe angegeben werden mit der Option -H. Wichtig: die Anzahl Spaltennamen muss der Anzahl der selektierten Unterfelder entsprechen.</p>
<pre><code class="language-bash">pica select -H &quot;idn, autor-idn, autor-vorname, autor-nachname&quot; &quot;003@.0, 028A{4 == 'aut',9,d,a}&quot; testdaten.dat -o test-select.csv
</code></pre>
<h2 id="warum-zwei-filtermÃ¶glichkeiten"><a class="header" href="#warum-zwei-filtermÃ¶glichkeiten">Warum zwei FiltermÃ¶glichkeiten?</a></h2>
<p>Die doppelte FiltermÃ¶glichkeit einmal mit dem Filter-Tool und einmal im select-Tool verwirrt auf den ersten Blick etwas. <code>filter</code> prÃ¼ft eine oder mehrere Felder oder Unterfelder auf Bedingungen und gibt den gesamten Datensatz aus, wenn die Bedingung wahr ist. <code>select</code> prÃ¼ft ebenfalls auf Bedingungen und selektiert dann die benÃ¶tigten Teildaten.</p>
<p>Man kÃ¶nnte auch sagen: <code>filter</code> arbeitet auf Datensatzebene und <code>select</code> auf Feldebene. </p>
<h2 id="arbeit-mit-groÃŸen-datenabzÃ¼gen"><a class="header" href="#arbeit-mit-groÃŸen-datenabzÃ¼gen">Arbeit mit groÃŸen DatenabzÃ¼gen</a></h2>
<p>pica-rs parst immer den kompletten Datenbestand, auch wenn man nur wenige Ergebnisse erwartet. Deshalb ist es manchmal sinnvoll, die Ausgangsdatei in kleinere Dateien zu teilen, die dann viel schneller verarbeitet werden kÃ¶nnen.</p>
<p>In unseren Testdaten haben wir Titeldaten und Normdaten zusammen. Es kÃ¶nnte z.B. sinnvoll sein, die Normdaten zu extrahieren, wenn man keine Titeldaten braucht oder nur eine bestimmte Satzart zu extrahieren, wenn man nur innerhalb dieser Satzart suchen will.</p>
<p>#Todo</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="verwendung-von-pica-rs-zur-datenanalyse-mit-rmarkdown"><a class="header" href="#verwendung-von-pica-rs-zur-datenanalyse-mit-rmarkdown">Verwendung von pica-rs zur Datenanalyse mit RMarkdown</a></h1>
<p>Beispielhaft wird in diesem Tutorial demonstriert, wie das Toolkit
pica-rs fÃ¼r Datenanalysen mit
<a href="https://rmarkdown.rstudio.com/">RMarkdown</a> eingesetzt werden kann.
Datenabfrage mit <code>pica-rs</code> und Datenanalyse mit <code>R</code> kÃ¶nnen so in einem
gemeinsamen Dokument kombiniert werden.</p>
<pre><code class="language-r"># Setup: 
# Globale Einstellungen fÃ¼r das AusfÃ¼hren von Code-BlÃ¶cken durch knitr
knitr::opts_chunk$set(echo = TRUE, message = FALSE, dev=&quot;jpeg&quot;, dpi = 300, fig.path = &quot;plots/&quot;)
# Laden von R-Paketen
library(tidyverse) # beinhaltet u.a. readr, dplyr und ggplot2
</code></pre>
<h2 id="datenabfrage"><a class="header" href="#datenabfrage">Datenabfrage</a></h2>
<p>ZunÃ¤chst erzeugen wir mit folgender Pica-Abfrage von der Datei
<code>testdaten.dat</code> eine CSV-Datei mit allen Tupeln aus Titel-idn und
GND-EntitÃ¤t-idn. Um die GND-EntitÃ¤ten abzurufen, die mit einem
Titeldatensatz verknÃ¼pft sind, muss das Listenfeld <code>041A</code> mit
<code>pica select</code> ausgelesen werden. Sind mehrere GND-EntitÃ¤ten in einem
Titel-Datensatz vohanden, expandiert <code>pica select</code> diese automatisch,
d.h. im Output <code>title_idn_gnd_idn.csv</code> kommen auch IDN-Nummern von
Titeln ggf. mehrfach vor (je eine Zeile pro GND-EntitÃ¤t).</p>
<pre><code class="language-bash">pica select -s --no-empty-columns -H &quot;idn_titel, idn_sw&quot;  &quot;003@.0,041A/*.9&quot; \
  ../testdaten.dat  -o title_idn_gnd_idn.csv 
</code></pre>
<p>Die Datei <code>title_idn_gnd_idn.csv</code> kann ggf. auch nur temporÃ¤r erzeugt
werden, wenn ein Zwischenspeichern des Outputs von <code>pica-rs</code>nicht
gewÃ¼nscht ist. Das Einlesen der Date in R erfolgt Ã¼ber die Ã¼blichen
Funktionen, z.B. aus dem <code>tidyverse</code>-Unterpaket <code>readr</code>.</p>
<pre><code class="language-r">title_idn_gnd_idn &lt;- read_csv(&quot;title_idn_gnd_idn.csv&quot;, 
                              col_types = list(
                                idn_titel = col_factor(),
                                idn_sw = col_factor()))
</code></pre>
<h2 id="datenanalyse"><a class="header" href="#datenanalyse">Datenanalyse</a></h2>
<p>Wir wollen die abgefragten Daten im Folgenden beispielhaft analysieren:
ZunÃ¤chst erzeugen wir eine zusammenfassende ZÃ¤hlstatistik:</p>
<pre><code class="language-r">count_summary &lt;- title_idn_gnd_idn %&gt;% 
  summarise(
    n_title = n_distinct(idn_titel), 
    n_terms = n_distinct(idn_sw)
    )
</code></pre>
<p>In dem so erzeugten Datensatz gibt es 245 verschiedene GND-EntitÃ¤ten,
die an mindestens einen von 103 verschiedenen Titel-DatensÃ¤tzen vergeben
wurden.</p>
<p>Als nÃ¤chstes beantworten wir die Frage, wie viele GND-EntitÃ¤ten pro
Titel im Durchschnitt verwendet werden:</p>
<pre><code class="language-r">sw_per_title &lt;- title_idn_gnd_idn %&gt;% 
  group_by(idn_titel) %&gt;% 
  summarise(n_sw = n())

card_d &lt;- sw_per_title %&gt;% 
  summarise(
    n_title = n(), 
    avg_count = sum(n_sw)/n_title
    ) %&gt;% 
  pull(avg_count)
</code></pre>
<p>Im Mittel liegen 2.77 GND-EntitÃ¤ten pro Titel vor.</p>
<p>Wir wollen nun die IDN-Nummern der am hÃ¤ufigsten verwendeten
GND-EntitÃ¤ten ausgeben:</p>
<pre><code class="language-r">gnd_term_freq &lt;- title_idn_gnd_idn %&gt;% 
  group_by(idn_sw) %&gt;% 
  summarise(freq = n()) %&gt;% 
  arrange(desc(freq))

head(gnd_term_freq, n = 10) %&gt;% 
  knitr::kable()
</code></pre>
<table><thead><tr><th style="text-align: left">idn_sw</th><th style="text-align: right">freq</th></tr></thead><tbody>
<tr><td style="text-align: left">040118827</td><td style="text-align: right">10</td></tr>
<tr><td style="text-align: left">040305503</td><td style="text-align: right">5</td></tr>
<tr><td style="text-align: left">040538818</td><td style="text-align: right">4</td></tr>
<tr><td style="text-align: left">041245113</td><td style="text-align: right">3</td></tr>
<tr><td style="text-align: left">041248538</td><td style="text-align: right">3</td></tr>
<tr><td style="text-align: left">041879635</td><td style="text-align: right">3</td></tr>
<tr><td style="text-align: left">040509265</td><td style="text-align: right">2</td></tr>
<tr><td style="text-align: left">040013073</td><td style="text-align: right">2</td></tr>
<tr><td style="text-align: left">118636405</td><td style="text-align: right">2</td></tr>
<tr><td style="text-align: left">040526925</td><td style="text-align: right">2</td></tr>
</tbody></table>
<h2 id="datenvisualisierung"><a class="header" href="#datenvisualisierung">Datenvisualisierung</a></h2>
<p>Ãœber alle SchlagwÃ¶rter betrachtet sieht die Verteilung der
GND-EntitÃ¤ten-Verwendung wie folgt aus:</p>
<pre><code class="language-r">g &lt;- ggplot(gnd_term_freq, aes(x = freq)) + 
  geom_histogram(aes(y = (..count..)/sum(..count..)), binwidth = 1) + 
  scale_y_continuous(labels = scales::percent, limits = c(0,1)) + 
  scale_x_continuous(breaks = c(0,2,4,6,8,10)) + 
  xlab(&quot;HÃ¤ufigkeit GND-EntitÃ¤ten-Verwendung&quot;) + 
  ylab(&quot;Anteil an allen GND-EntitÃ¤t&quot;) + 
  ggtitle(&quot;Verteilung GND-EntitÃ¤ten-Verwendung&quot;)

g
</code></pre>
<p><img src="rmarkdown/plots/term_dist-1.jpeg" alt="" /></p>
<p>Das Histogramm zeigt, dass die meisten GND-EntitÃ¤ten nur einmal
verwendet werden. Einzelne Terme werden aber auch bis zu 10-mal
verwendet.</p>
<p>Eine andere Visualisierungsform des gleichen Sachverhalts ist Folgende:</p>
<pre><code class="language-r">gnd_term_freq &lt;- gnd_term_freq %&gt;%
  mutate(index = 1:n())

ggplot(gnd_term_freq, aes(x = index, y = freq)) +
    geom_point() +
    scale_y_log10() +
    ylab(&quot;HÃ¤ufigkeit je GND-EntitÃ¤t&quot;) +
    xlab(&quot;Index GND-EntitÃ¤ten (sortiert nach HÃ¤ufigkeit)&quot;) + 
    ggtitle(&quot;Long-Tail Darstellung&quot;)
</code></pre>
<p><img src="rmarkdown/plots/plot_freq_-1.jpeg" alt="" /></p>
<h2 id="dieses-tutorial-selbst-ausfÃ¼hren"><a class="header" href="#dieses-tutorial-selbst-ausfÃ¼hren">Dieses Tutorial selbst ausfÃ¼hren</a></h2>
<p>Um das hier vorgestellte Tutorial selbst auszufÃ¼hren, stehen im
offiziellen github-Repository des Toolkits pica-rs die<br />
<a href="https://github.com/deutsche-nationalbibliothek/pica-rs/blob/main/docs/book/src/de/rmarkdown/rmarkdown.rmd">.rmd-Quelldatei</a>
sowie ein <a href="https://github.com/deutsche-nationalbibliothek/pica-rs/blob/main/docs/book/src/de/testdaten.dat">Testdatensatz im PICA+
Format</a>
fÃ¼r dieses Tutorial zum Download zur VerfÃ¼gung.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="referenz"><a class="header" href="#referenz">Referenz</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="record-matcher"><a class="header" href="#record-matcher">Record Matcher</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>RecordMatcher</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#record-matcher-singleton"><em>RecordMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-group"><em>RecordMatcherGroup</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-not"><em>RecordMatcherNot</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-composite"><em>RecordMatcherComposite</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-cardinality"><em>RecordMatcherCardinality</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-true"><em>RecordMatcherTrue</em></a></p>
</blockquote>
<h2 id="record-matcher-singleton"><a class="header" href="#record-matcher-singleton">Record Matcher Singleton</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>RecordMatcherSingleton</em> : <a href="referenz/matcher.html#field-matcher"><em>FieldMatcher</em></a></p>
</blockquote>
<h2 id="record-matcher-composite"><a class="header" href="#record-matcher-composite">Record Matcher Composite</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>RecordMatcherComposite</em> :<br />
Â Â  Â Â  RecordMatcherCompositeOr<br />
Â Â  | RecordMatcherCompositeAnd<br />
<br />
<em>RecordMatcherCompositeOr</em> : OrOperand <code>||</code> OrOperand<br />
<br />
<em>OrOperand</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#record-matcher-group"><em>RecordMatcherGroup</em></a><br />
Â Â  | <em>RecordMatcherCompositeAnd</em><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-singleton"><em>RecordMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-cardinality"><em>RecordMatcherCardinality</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-not"><em>RecordMatcherNot</em></a>
<br />
<em>RecordMatcherCompositeAnd</em> : AndOperand <code>&amp;&amp;</code> AndOperand<br />
<br />
<em>AndOperand</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#record-matcher-group"><em>RecordMatcherGroup</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-singleton"><em>RecordMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-cardinality"><em>RecordMatcherCardinality</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-not"><em>RecordMatcherNot</em></a></p>
</blockquote>
<h2 id="record-matcher-group"><a class="header" href="#record-matcher-group">Record Matcher Group</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>RecordMatcherGroup</em> : <code>(</code> <em>RecordMatcherGroupInner</em> <code>)</code><br />
<br />
<em>RecordMatcherGroupInner</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#record-matcher-composite"><em>RecordMatcherComposite</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-singleton"><em>RecordMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-not"><em>RecordMatcherNot</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-group"><em>RecordMatcherGroup</em></a></p>
</blockquote>
<h2 id="record-matcher-not"><a class="header" href="#record-matcher-not">Record Matcher Not</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>RecordMatcherNot</em> : <code>!</code> <em>RecordMatcherNotInner</em><br />
<br />
<em>RecordMatcherNotInner</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#record-matcher-composite"><em>RecordMatcherComposite</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-singleton"><em>RecordMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-not"><em>RecordMatcherNot</em></a><br />
Â Â  | <a href="referenz/matcher.html#record-matcher-group"><em>RecordMatcherGroup</em></a></p>
</blockquote>
<h2 id="record-matcher-cardinality"><a class="header" href="#record-matcher-cardinality">Record Matcher Cardinality</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>RecordMatcherCardinality</em> :<br />
Â Â  <a href="referenz/matcher.html#tag-matcher"><em>TagMatcher</em></a> <a href="referenz/matcher.html#occurrence-matcher"><em>OccurrenceMatcher</em></a> <a href="referenz/matcher.html#subfield-list-matcher"><em>SubfieldListMatcher</em></a>? <a href="referenz/matcher.html#comparison-operators"><em>ComparisonOp</em></a><sup>*</sup> [0-9]+</p>
</blockquote>
<p><sup>*</sup> <code>=^</code>, <code>=$</code> and <code>=*</code> not allowed</p>
<h2 id="record-matcher-true"><a class="header" href="#record-matcher-true">Record Matcher True</a></h2>
<p>TBD</p>
<h1 id="field-matcher"><a class="header" href="#field-matcher">Field Matcher</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>FieldMatcher</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#field-matcher-subfield"><em>FieldMatcherSubfield</em></a><br />
Â Â  | <a href="referenz/matcher.html#field-matcher-exists"><em>FieldMatcherExists</em></a></p>
</blockquote>
<h2 id="field-matcher-subfield"><a class="header" href="#field-matcher-subfield">Field Matcher Subfield</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>FieldMatcherSubfield</em> : <a href="referenz/matcher.html#tag-matcher"><em>TagMatcher</em></a> <a href="referenz/matcher.html#occurrence-matcher"><em>OccurrenceMatcher</em></a> (<em>DotExpr</em> | <em>DollarExpr</em> | <em>LazyExpr</em> | <em>BracketExpr</em>)<br />
<br />
<em>DotExpr</em> : <code>.</code> <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
<em>DollarExpr</em> : ws? <code>$</code> <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
<em>LazyExpr</em> : <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
<em>BracketExpr</em>: <code>{</code> <a href="referenz/matcher.html#subfield-list-matcher"><em>SubfieldListMatcher</em></a> <code>}</code></p>
</blockquote>
<h2 id="field-matcher-exists"><a class="header" href="#field-matcher-exists">Field Matcher Exists</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>FieldMatcherExists</em> : <a href="referenz/matcher.html#tag-matcher"><em>TagMatcher</em></a> <a href="referenz/matcher.html#occurrence-matcher"><em>OccurrenceMatcher</em></a> <code>?</code></p>
</blockquote>
<h1 id="tag-matcher"><a class="header" href="#tag-matcher">Tag Matcher</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>TagMatcher</em> :<br />
Â Â  <code>/</code> ( <em>TageMatcherSome</em> | <em>TagMatcherPattern</em> )<br />
<br />
<em>TagMatcherSome</em> :<br />
Â Â  <a href="referenz/tag.html#tag"><em>Tag</em></a><br />
<br />
<em>TagMatcherPattern</em> :<br />
Â Â  <em>Digit0</em> <em>Digit1</em> <em>Digit2</em> <em>Digit3</em><br />
<br />
<em>Digit0</em> : ( [0-2] | <code>[</code> [0-2]+ <code>]</code> | '.' )<br />
<em>Digit1</em> : ( [0-9] | <code>[</code> [0-9]+ <code>]</code> | '.' )<br />
<em>Digit2</em> : ( [0-9] | <code>[</code> [0-9]+ <code>]</code> | '.' )<br />
<em>Digit3</em> : ( ([A-Z] | '@') | <code>[</code> ([A-Z] | '@')+ <code>]</code> | '.' )</p>
</blockquote>
<h1 id="occurrence-matcher"><a class="header" href="#occurrence-matcher">Occurrence Matcher</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>OccurrenceMatcher</em> : <code>/</code> (<br />
Â Â  Â Â  <em>OccurrenceMatcherRange</em><br />
Â Â  | <em>OccurrenceMatcherSome</em><br />
Â Â  | <em>OccurrenceMatcherNone</em><br />
Â Â  | <em>OccurrenceMatcherAny</em><br />
)<br />
<br />
<em>OccurrenceMatcherRange</em> : <a href="referenz/occurrence.html#occurrence-digits"><em>OccurrenceDigits</em></a> <code>-</code> <a href="referenz/occurrence.html#occurrence-digits"><em>OccurrenceDigits</em></a><br />
<em>OccurrenceMatcherSome</em> : <a href="referenz/occurrence.html#occurrence-digits"><em>OccurrenceDigits</em></a><br />
<em>OccurrenceMatcherNone</em> : <code>00</code><br />
<em>OccurrenceMatcherAny</em> : <code>*</code></p>
</blockquote>
<h1 id="subfield-list-matcher"><a class="header" href="#subfield-list-matcher">Subfield List Matcher</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldListMatcher</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#subfield-list-matcher-group"><em>SubfieldListMatcherGroup</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-not"><em>SubfieldListMatcherNot</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-composite"><em>SubfieldListMatcherComposite</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-cardinality"><em>SubfieldListMatcherCardinality</em></a></p>
</blockquote>
<h2 id="subfield-list-matcher-singleton"><a class="header" href="#subfield-list-matcher-singleton">Subfield List Matcher Singleton</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldListMatcherSingleton</em> : <a href="referenz/matcher.html#subfield-matcher"><em>SubfieldMatcher</em></a></p>
</blockquote>
<h2 id="subfield-list-matcher-group"><a class="header" href="#subfield-list-matcher-group">Subfield List Matcher Group</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldListMatcherGroup</em> :<br />
Â Â  Â Â  <code>(</code> <em>SubfieldListMatcherGroupInner</em> <code>)</code><br />
<br />
<em>SubfieldListMatcherGroupInner</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#subfield-list-matcher-composite"><em>SubfieldListMatcherComposite</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-not"><em>SubfieldListMatcherNot</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-group"><em>SubfieldListMatcherGroup</em></a></p>
</blockquote>
<h2 id="subfield-list-matcher-not"><a class="header" href="#subfield-list-matcher-not">Subfield List Matcher Not</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldListMatcherNot</em> : <code>!</code> <em>SubfieldListMatcherNotInner</em><br />
<br />
<em>SubfieldListMatcherNotInner</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#subfield-list-matcher-group"><em>SubfieldListMatcherGroup</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-not"><em>SubfieldListMatcherNot</em></a></p>
</blockquote>
<h2 id="subfield-list-matcher-composite"><a class="header" href="#subfield-list-matcher-composite">Subfield List Matcher Composite</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldListMatcherComposite</em> :<br />
Â Â  Â Â  SubfieldListMatcherCompositeOr<br />
Â Â  | SubfieldListMatcherCompositeAnd<br />
<br />
<em>SubfieldListMatcherCompositeOr</em> : OrOperand <code>||</code> OrOperand<br />
<br />
<em>OrOperand</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#subfield-list-matcher-group"><em>SubfieldListMatcherGroup</em></a><br />
Â Â  | <em>SubfieldListMatcherCompositeAnd</em><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-cardinality"><em>SubfieldListMatcherCardinality</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-not"><em>SubfieldListMatcherNot</em></a><br />
<br />
<em>SubfieldListMatcherCompositeAnd</em> : AndOperand <code>&amp;&amp;</code> AndOperand<br />
<br />
<em>AndOperand</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#subfield-list-matcher-group"><em>SubfieldListMatcherGroup</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-singleton"><em>SubfieldListMatcherSingleton</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-cardinality"><em>SubfieldListMatcherCardinality</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-list-matcher-not"><em>SubfieldListMatcherNot</em></a></p>
</blockquote>
<h2 id="subfield-list-matcher-cardinality"><a class="header" href="#subfield-list-matcher-cardinality">Subfield List Matcher Cardinality</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldListMatcherCardinality</em> : <a href="referenz/subfield.html#subfield-code"><em>SubfieldCode</em></a> <a href="referenz/matcher.html#comparison-operators"><em>ComparisonOp</em></a><sup>*</sup> <em>Value</em><br />
<br />
<em>Value</em>: [0-9]+</p>
</blockquote>
<p><sup>*</sup> <code>=^</code>, <code>=$</code> and <code>=*</code> not allowed</p>
<h1 id="subfield-matcher"><a class="header" href="#subfield-matcher">Subfield Matcher</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldMatcher</em> :<br />
Â Â  Â Â  <a href="referenz/matcher.html#subfield-matcher-comparison"><em>SubfieldMatcherComparison</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-matcher-regex"><em>SubfieldMatcherRegex</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-matcher-in"><em>SubfieldMatcherIn</em></a><br />
Â Â  | <a href="referenz/matcher.html#subfield-matcher-exists"><em>SubfieldMatcherExists</em></a></p>
</blockquote>
<h2 id="subfield-matcher-comparison"><a class="header" href="#subfield-matcher-comparison">Subfield Matcher Comparison</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldMatcherComparison</em> : <a href="referenz/subfield.html#subfield-codes"><em>SubfieldCodes</em></a> <a href="referenz/matcher.html#comparison-operators"><em>ComparisonOp</em></a><sup>*</sup> <a href="referenz/matcher.html#string-literals"><em>StringLiteral</em></a></p>
</blockquote>
<p><sup>*</sup> <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&gt;</code> not allowed</p>
<h2 id="subfield-matcher-regex"><a class="header" href="#subfield-matcher-regex">Subfield Matcher Regex</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldMatcherRegex</em> :<br />
Â Â  Â Â  <a href="referenz/subfield.html#subfield-codes"><em>SubfieldCodes</em></a> <code>=~</code> <a href="referenz/matcher.html#string-literals"><em>StringLiteral</em></a><br />
Â Â  | <a href="referenz/subfield.html#subfield-codes"><em>SubfieldCodes</em></a> <code>!~</code> <a href="referenz/matcher.html#string-literals"><em>StringLiteral</em></a></p>
</blockquote>
<h2 id="subfield-matcher-in"><a class="header" href="#subfield-matcher-in">Subfield Matcher In</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldMatcherIn</em> :<br />
Â Â  Â Â  <a href="referenz/subfield.html#subfield-codes"><em>SubfieldCodes</em></a> <code>in</code> <a href="referenz/matcher.html#string-literals"><em>StringLiteralList</em></a><br />
Â Â  | <a href="referenz/subfield.html#subfield-codes"><em>SubfieldCodes</em></a> <code>not in</code> <a href="referenz/matcher.html#string-literals"><em>StringLiteralList</em></a></p>
</blockquote>
<h2 id="subfield-matcher-exists"><a class="header" href="#subfield-matcher-exists">Subfield Matcher Exists</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldMatcherExists</em> : <a href="referenz/subfield.html#subfield-codes"><em>SubfieldCodes</em></a> <code>?</code></p>
</blockquote>
<h1 id="comparison-operators"><a class="header" href="#comparison-operators">Comparison Operators</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>ComparisonOp</em> : <code>==</code> | <code>!=</code> | <code>&gt;=</code> | <code>&gt;</code> | <code>&lt;=</code> | <code>&lt;</code> | <code>=^</code> | <code>=$</code> | <code>=*</code></p>
</blockquote>
<h1 id="boolean-operators"><a class="header" href="#boolean-operators">Boolean Operators</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>BooleanOp</em> : <code>&amp;&amp;</code> | <code>||</code></p>
</blockquote>
<h1 id="string-literals"><a class="header" href="#string-literals">String Literals</a></h1>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>StringLiteral</em> : <code>'</code> <em>String</em> <code>'</code><br />
<em>StringLiteralList</em> : <code>[</code> <a href="referenz/matcher.html#string-literals"><em>StringLiteral</em></a> { <code>,</code> <a href="referenz/matcher.html#string-literals"><em>StringLiteral</em></a> } <code>]</code></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="occurrence"><a class="header" href="#occurrence">Occurrence</a></h1>
<h2 id="occurrence-digits"><a class="header" href="#occurrence-digits">Occurrence Digits</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>OccurrenceDigits</em> : [0-9]{2,3}</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="subfield"><a class="header" href="#subfield">Subfield</a></h1>
<h2 id="subfield-code"><a class="header" href="#subfield-code">Subfield Code</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldCode</em> : [0-9] | [A-Z] | [a-z]</p>
</blockquote>
<h2 id="subfield-codes"><a class="header" href="#subfield-codes">Subfield Codes</a></h2>
<blockquote>
<p><strong><sup>Syntax</sup></strong><br />
<em>SubfieldCodes</em> : <a href="referenz/subfield.html#subfield-code"><em>SubfieldCode</em></a> | <code>[</code> <a href="referenz/subfield.html#subfield-code"><em>SubfieldCode</em></a>+ <code>]</code> | <a href="referenz/subfield.html#subfield-code"><em>SubfieldCode</em></a>+ | <code>*</code></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tag"><a class="header" href="#tag">Tag</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
